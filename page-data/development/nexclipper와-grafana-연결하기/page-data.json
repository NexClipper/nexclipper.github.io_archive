{"componentChunkName":"component---src-templates-blog-post-js","path":"/development/nexclipper와-grafana-연결하기/","result":{"data":{"site":{"siteMetadata":{"title":"넥스클리퍼 기술 블로그","author":"[NexClipper]","siteUrl":"https://nexclipper.github.io","comment":{"disqusShortName":"nexclippertechblog","utterances":""},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"7ce2b26f-00f3-548c-afff-ef563b731762","excerpt":"쿠버네티스 모니터링으로 프로메테우스가 가장 많이 사용되지만 엔터프라이즈 환경에서는 다음과 같이 지원되지 않는 몇가지 문제가 있다. 데이터 스토리지: 내구성이 낮은 데이터 스토리지는 롱텀 데이터 저장 불가능 logging - 이벤트 로깅 시스템이 아니라 메트릭스를 수집하고 처리하도록 설계 automatic horizontal scaling user management…","html":"<p>쿠버네티스 모니터링으로 프로메테우스가 가장 많이 사용되지만 엔터프라이즈 환경에서는 다음과 같이 지원되지 않는 몇가지 문제가 있다.</p>\n<ul>\n<li>데이터 스토리지: 내구성이 낮은 데이터 스토리지는 롱텀 데이터 저장 불가능</li>\n<li>logging - 이벤트 로깅 시스템이 아니라 메트릭스를 수집하고 처리하도록 설계</li>\n<li>automatic horizontal scaling</li>\n<li>user management</li>\n<li>여러 클러스터, 서로 다른 서버 메트릭에 대한 글로벌 뷰</li>\n<li>엔드포인트 증가에 따른 확장성</li>\n<li>방화벽 내의 엔드포인트 접근</li>\n</ul>\n<p>이런 문제들을 해결하기 위해 타노스, 콜텍스등 여러 솔루션들이 나오고 있으며 이중 <a href=\"https://github.com/NexClipper/NexClipper\">NexClipper</a>를 통한 Kubernetes 모니터링을 소개 하고자 한다.</p>\n<p>NexClipper는 아래 그림과 같이 쿠버네티스 모니터링에 최적화 되어있으며, 각 노드도 모니터링 할 수 있게 도와주는 솔루션이다. 물론 OpenMetrics도 지원을한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.500715307582254%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABqElEQVQoz3VS22rbQBDV//9PyUNe8tIWUggpNBTXuE5cOZJ1XWnv19PZTagThy4MO6M9OnM7VUoJl5ZPjBHOOXjv/1mOQwjlPVy8Zz/GhAofzgthBuA1QUyx3P7zJ8yHHZ7qI9g8v6BLAYSjBJm4elvVGZAJPZSxBIoF7EKCfdpCMQbGJbhQsC5AG1csY10mDCGDI4aHn1i6Hpb83A6TuZ2Ebdfgy/aAum7w+9hRdS2MS5BK4+vNFYSyFEcI7SFNQOWJoO8H7Hc7jMMAYz2sD1gyIY3ryDpsmhHjxNCeejRkXGp0I8PdwwbtxJE5lA3FiDAQeMZErRhrqbr02jqKT91Ak3GTQEVglAn75xmP9QnP/YpFBQh6I84yrndLOW86bzlgFhzt2EPwFZaSTXSfxgGSvucFKKPRTCP4QsWQnxVQ/U82RRLJ4dtmwp+WI3hLo7D4vmN4PK60KBqN1Tj0Ave/JiLz77d8SWizbOBxdcuwOUg4I5GCw839gh97SQkMItm2lri+W4jMFmV80OFbYQshodVKLa7QWkMpBSXOsTGmjCNjhBDln7/Q+geP8DdUZAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"nexclipper architecture\"\n        title=\"nexclipper architecture\"\n        src=\"/static/1337438a20ceb1489751caccbb98c7e2/799d3/nexclipper_architecture.png\"\n        srcset=\"/static/1337438a20ceb1489751caccbb98c7e2/00d96/nexclipper_architecture.png 148w,\n/static/1337438a20ceb1489751caccbb98c7e2/0b23c/nexclipper_architecture.png 295w,\n/static/1337438a20ceb1489751caccbb98c7e2/799d3/nexclipper_architecture.png 590w,\n/static/1337438a20ceb1489751caccbb98c7e2/2a3d6/nexclipper_architecture.png 885w,\n/static/1337438a20ceb1489751caccbb98c7e2/ae92f/nexclipper_architecture.png 1180w,\n/static/1337438a20ceb1489751caccbb98c7e2/935b6/nexclipper_architecture.png 1398w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>NexClipper로 metric들을 수집하여 Grafana로 모니터링 하는 방법을 소개한다.</p>\n<p>Kubernetes가 설치되어 있다는 전제하에 진행한다.</p>\n<h1 id=\"prerequisite\"><a href=\"#prerequisite\" aria-label=\"prerequisite permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prerequisite</h1>\n<h2 id=\"system-requirements\"><a href=\"#system-requirements\" aria-label=\"system requirements permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>System Requirements</h2>\n<ul>\n<li>linux</li>\n<li>Go: 1.11 or above</li>\n<li>ProtocolBuffer Compiler</li>\n<li>TimescaleDB</li>\n</ul>\n<h2 id=\"setup-build-environments\"><a href=\"#setup-build-environments\" aria-label=\"setup build environments permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setup build environments</h2>\n<div class=\"gatsby-highlight\" data-language=\"shellscript\"><pre class=\"language-shellscript\"><code class=\"language-shellscript\">sudo apt install -y build-essential\nsudo apt install -y protobuf-compiler\ngo get -u github.com/golang/protobuf/protoc-gen-go\nexport PATH=$PATH:~/go/bin</code></pre></div>\n<h1 id=\"initialize-database\"><a href=\"#initialize-database\" aria-label=\"initialize database permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Initialize database</h1>\n<h2 id=\"install-timescaledb-docker\"><a href=\"#install-timescaledb-docker\" aria-label=\"install timescaledb docker permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install TimescaleDB (docker)</h2>\n<p>Refer to <a href=\"https://docs.timescale.com/latest/getting-started/installation\">https://docs.timescale.com/latest/getting-started/installation</a> document for other platform.</p>\n<p>pull <code class=\"language-text\">timescaledb</code> docker image from <a href=\"https://hub.docker.com/r/timescale/timescaledb/\">Docker Hub</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"shellscript\"><pre class=\"language-shellscript\"><code class=\"language-shellscript\">docker pull timescale/timescaledb:1.5.1-pg11</code></pre></div>\n<p>start with persistent storage</p>\n<div class=\"gatsby-highlight\" data-language=\"shellscript\"><pre class=\"language-shellscript\"><code class=\"language-shellscript\">docker run -d --name timescaledb -p 5432:5432 -e POSTGRES_PASSWORD=password \\\n  -v [/local/disk/storage]:/var/lib/postgresql/data \\\n  timescale/timescaledb:1.5.1-pg11</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shellscript\"><pre class=\"language-shellscript\"><code class=\"language-shellscript\">docker ps | grep timescaledb\n\n423f126c31b5        timescale/timescaledb:1.5.1-pg11   &quot;docker-entrypoint.s…&quot;   18 seconds ago         Up 2 hours          0.0.0.0:5432-&gt;5432/tcp   timescaledb</code></pre></div>\n<p>First connect to the PostgreSQL instance</p>\n<div class=\"gatsby-highlight\" data-language=\"shellscript\"><pre class=\"language-shellscript\"><code class=\"language-shellscript\">docker exec -it 423f bash\n\nbash-5.0# psql -h localhost -U postgres\npsql (11.5)\nType &quot;help&quot; for help.\n\npostgres=#</code></pre></div>\n<p>Create <code class=\"language-text\">nexclipper</code> database</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token assign-left variable\">postgres</span><span class=\"token operator\">=</span><span class=\"token comment\"># CREATE DATABASE nexclipper;</span>\nCREATE DATABASE\n<span class=\"token assign-left variable\">postgres</span><span class=\"token operator\">=</span><span class=\"token comment\"># \\q</span>\nbash-5.0<span class=\"token comment\"># exit</span>\n<span class=\"token builtin class-name\">exit</span></code></pre></div>\n<h2 id=\"initialize-tables\"><a href=\"#initialize-tables\" aria-label=\"initialize tables permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Initialize tables</h2>\n<p>Excute database migration command</p>\n<div class=\"gatsby-highlight\" data-language=\"shellscript\"><pre class=\"language-shellscript\"><code class=\"language-shellscript\">go get github.com/NexClipper/NexClipper\ncd ~/go/github.com/NexClipper/NexClipper\n\ngo mod download\ngo run cmd/migrate/migrate.go --db.host=localhost --db.user=postgres \\\n  --db.pass=password --db.name=nexclipper</code></pre></div>\n<h1 id=\"start-nexclipper\"><a href=\"#start-nexclipper\" aria-label=\"start nexclipper permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Start NexClipper</h1>\n<div class=\"gatsby-highlight\" data-language=\"shellscript\"><pre class=\"language-shellscript\"><code class=\"language-shellscript\">kubectl create namespace nexclipper</code></pre></div>\n<h2 id=\"start-nexserver\"><a href=\"#start-nexserver\" aria-label=\"start nexserver permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Start NexServer</h2>\n<div class=\"gatsby-highlight\" data-language=\"shellscript\"><pre class=\"language-shellscript\"><code class=\"language-shellscript\">cd ~/go/github.com/NexClipper/NexClipper/deployment/kubernetes\n\nvi nexserver.yaml\n\nenv 부분 수정\nex)\nenv:\n            - name: NEXSERVER_DB_HOST\n              value: &quot;192.168.2.65&quot;\n            - name: NEXSERVER_DB_PORT\n              value: &quot;5432&quot;\n            - name: NEXSERVER_DB_USER\n              value: &quot;postgres&quot;\n            - name: NEXSERVER_DB_PASS\n              value: &quot;password&quot;\n            - name: NEXSERVER_DB_NAME\n              value: &quot;nexclipper&quot;</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shellscript\"><pre class=\"language-shellscript\"><code class=\"language-shellscript\">kubectl create -f nexserver.yaml</code></pre></div>\n<h2 id=\"start-nexagent\"><a href=\"#start-nexagent\" aria-label=\"start nexagent permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Start NexAgent</h2>\n<div class=\"gatsby-highlight\" data-language=\"shellscript\"><pre class=\"language-shellscript\"><code class=\"language-shellscript\">kubectl get svc -n nexclipper\n\nNAME        TYPE       CLUSTER-IP     EXTERNAL-IP   PORT(S)           AGE\nnexserver   NodePort   10.96.14.234   &lt;none&gt;        18000:30819/TCP   9s\n\nvi nexagent.yaml\n\nenv 부분 수정\nex)\nenv:\n            - name: NEXAGENT_SERVER_ADDRESS\n              value: 192.168.2.65:30819\n            - name: NEXAGENT_KUBERNETES_NAME\n              value: k8s-cluster\n            - name: NEXAGENT_KUBERNETES_NAMESPACE\n              value: nexclipper</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shellscript\"><pre class=\"language-shellscript\"><code class=\"language-shellscript\">kubectl create -f nexagent.yaml</code></pre></div>\n<h1 id=\"install-grafana\"><a href=\"#install-grafana\" aria-label=\"install grafana permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install Grafana</h1>\n<h2 id=\"create-a-configmap\"><a href=\"#create-a-configmap\" aria-label=\"create a configmap permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create a Configmap</h2>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ConfigMap\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> grafana<span class=\"token punctuation\">-</span>datasources\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> monitoring\n<span class=\"token key atrule\">data</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">prometheus.yaml</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token punctuation\">-</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token key atrule\">\"apiVersion\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n        <span class=\"token key atrule\">\"datasources\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">{</span>\n               \"access\"<span class=\"token punctuation\">:</span><span class=\"token string\">\"proxy\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token key atrule\">\"editable\"</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span><span class=\"token punctuation\">,</span>\n                <span class=\"token key atrule\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"prometheus\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token key atrule\">\"orgId\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n                <span class=\"token key atrule\">\"type\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"prometheus\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token key atrule\">\"url\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"http://prometheus-service.monitoring.svc:8080\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token key atrule\">\"version\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shellscript\"><pre class=\"language-shellscript\"><code class=\"language-shellscript\">kubectl create -f grafana-datasource-config.yaml</code></pre></div>\n<h2 id=\"create-a-grafana-deployment\"><a href=\"#create-a-grafana-deployment\" aria-label=\"create a grafana deployment permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create a Grafana Deployment</h2>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> grafana\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> monitoring\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> grafana\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> grafana\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> grafana\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> grafana\n        <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> grafana/grafana<span class=\"token punctuation\">:</span>latest\n        <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> grafana\n          <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3000</span>\n        <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">limits</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2Gi\"</span>\n            <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1000m\"</span>\n          <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1Gi\"</span>\n            <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"500m\"</span>\n        <span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span>\n          <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /var/lib/grafana\n            <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> grafana<span class=\"token punctuation\">-</span>storage\n          <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /etc/grafana/provisioning/datasources\n            <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> grafana<span class=\"token punctuation\">-</span>datasources\n            <span class=\"token key atrule\">readOnly</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\n      <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> grafana<span class=\"token punctuation\">-</span>storage\n          <span class=\"token key atrule\">emptyDir</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> grafana<span class=\"token punctuation\">-</span>datasources\n          <span class=\"token key atrule\">configMap</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">defaultMode</span><span class=\"token punctuation\">:</span> <span class=\"token number\">420</span>\n              <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> grafana<span class=\"token punctuation\">-</span>datasources\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Service\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> grafana\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> monitoring\n  <span class=\"token key atrule\">annotations</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">prometheus.io/scrape</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'true'</span>\n      <span class=\"token key atrule\">prometheus.io/port</span><span class=\"token punctuation\">:</span>   <span class=\"token string\">'3000'</span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span> \n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> grafana\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> NodePort  \n  <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3000</span>\n      <span class=\"token key atrule\">targetPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3000</span>\n      <span class=\"token key atrule\">nodePort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">32000</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shellscript\"><pre class=\"language-shellscript\"><code class=\"language-shellscript\">kubectl create -f deployment.yaml</code></pre></div>\n<h1 id=\"nexclipper와-grafana-연동\"><a href=\"#nexclipper%EC%99%80-grafana-%EC%97%B0%EB%8F%99\" aria-label=\"nexclipper와 grafana 연동 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>NexClipper와 Grafana 연동</h1>\n<h2 id=\"grafana-접속\"><a href=\"#grafana-%EC%A0%91%EC%86%8D\" aria-label=\"grafana 접속 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Grafana 접속</h2>\n<p><a href=\"http://localhost:32000\">http://localhost:32000</a> 으로 접속하면 grafana 페이지가 나온다.</p>\n<p>초기 ID: admin, PW: admin 으로 접속 후 Configuration(빨간 네모) - Data Sources로 들어간다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.166666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABb0lEQVQoz4VRx07DQBTcG0oBQqptHJfdtePgiBBACKTcEEd+FAGpSLR/G95bpziEhMPolZkdzbPF9/sbPj6/MJnO8fQ8wut4htFkTpgtMDe7l9H0D26tYX5MVVQOS2i0bJxU66jWGqjVmwtkPe8sy4YfBGhR3dQ0N/SWfQpxXK2R0IHtuGaxhOO0c70Lzw1M5dm2XdjWWmu1CE3a0xuhWxY8T0JFMaSMEATKoN+/RBQl8L2QuA6Gj/cIpYbXDhF3u7gY3hAnzZzeDnD1cGfeCeuoAq07xswPJHxfrkwZPPNepwk0GYehhlQRVJL1rJGdGOosm8VBoYg47kKp2JC8XApXva8Q6QSDwTXS9NzoeeYLGJreKgrEwUSxWNxItETelKvWMXq9PpIkXRuRQYbYBGKIAhkuH+VT/Tbks825lCSvyYM5USjsNwxMr7a+7a6rRLlcygz+S7gw3JXOcJywUavQOWrrR+wz3NLRBWGQ1R9nRk+uw6GhSAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"grafana home\"\n        title=\"grafana home\"\n        src=\"/static/6aa81b2002d4e34796bf36b99ddc450a/799d3/grafana_home.png\"\n        srcset=\"/static/6aa81b2002d4e34796bf36b99ddc450a/00d96/grafana_home.png 148w,\n/static/6aa81b2002d4e34796bf36b99ddc450a/0b23c/grafana_home.png 295w,\n/static/6aa81b2002d4e34796bf36b99ddc450a/799d3/grafana_home.png 590w,\n/static/6aa81b2002d4e34796bf36b99ddc450a/2a3d6/grafana_home.png 885w,\n/static/6aa81b2002d4e34796bf36b99ddc450a/ae92f/grafana_home.png 1180w,\n/static/6aa81b2002d4e34796bf36b99ddc450a/eff2e/grafana_home.png 1920w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>timescaledb(postgresql)와 연동하기 위해 Add data source 클릭</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.166666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABbUlEQVQoz5WS226CQBRFJzWK1QaV+0VQVPDyYOxT9Y9rvaCgtjX9t90zYzBWqWkfVmYyc1hnH4AdDyk+j1/Y7d+xihNskj1S2qf7DyS7A+LtDvEmxXqTYE33q3h7ZrneYLGKBfO3JV7nCzClLiOMRuh0IwSdHppeC+PxBNPpjM4HsG0XumFC0wwoioparY5q9QmlYhnFokQUUXgogDF2ghd7fiDgMrfpn3BdGKYtzvxWANNyYNkOVN2EqWkYjAP4nkUNGqjVG5CpkSzXKKGqQqXuumEJ+AO9pofn4QjdsI8uJQ/DAdpBF0HQE2tEk7zMJuiHHei6DZOm4A1NywWrVKsiSYZG0jYJh2GETi8SEp5Q4LdpkrZI7Tg+1TvnIBmsJElClB1kUoVS8+Q8sZYDf1VZfbZymCSVfwgvL//Cdf2N8D+yPGjkfOE9+b07Vqk83ggv1zzuTcSUhiw+wnXnbO+4HmynecYSP/rvCb8Bfeg8X/sj5tkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"grafana datasource\"\n        title=\"grafana datasource\"\n        src=\"/static/e576f833e63e25233f606db2954e3bb6/799d3/grafana_datasource.png\"\n        srcset=\"/static/e576f833e63e25233f606db2954e3bb6/00d96/grafana_datasource.png 148w,\n/static/e576f833e63e25233f606db2954e3bb6/0b23c/grafana_datasource.png 295w,\n/static/e576f833e63e25233f606db2954e3bb6/799d3/grafana_datasource.png 590w,\n/static/e576f833e63e25233f606db2954e3bb6/2a3d6/grafana_datasource.png 885w,\n/static/e576f833e63e25233f606db2954e3bb6/ae92f/grafana_datasource.png 1180w,\n/static/e576f833e63e25233f606db2954e3bb6/eff2e/grafana_datasource.png 1920w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>SQL 항목에 있는 PostgreSQL을 클릭한다.</p>\n<p>아래와 같이 항목을 작성한 후 <code class=\"language-text\">Save &amp; Test</code> 버튼을 클릭하면 <code class=\"language-text\">Database Connection OK</code> 라는 메세지가 뜬다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.166666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABlUlEQVQoz3WR3U/iQBTF+2TXalj6NTMd6ActpQKC2F2UZx99MRp3Y/wTjQIFJPGvO94R0wiUh5OTmbnzu2fuaB/vC6xXa8yLBV5eZ3idzjFfrEjvmM2XeJsVmJIXyzVmxfKAVlS3wNu0gHZq6DAtF5btwnbILQeNZoBWnJL7qP02Ua/XIYQHx+VwHLYvl9HdjTTLduAyAca9L6lLrSRF2ulCeA0wxiH8DExGVMfLul0pBhcSml0BDKMYcdKBbTOCSsggBfMCgouDQHWmAmiGcVJ2UK5iJ+2MntxG3bS/m7Dy3D0A3SQk4JGubxWqhAElTNLs4OVd0BZQ13/tASP6kCzrQqqPoH2VsEo/G5YzrAL6YYLu4A/COEPwQ35LqfO9PoOQ/k5CqZ5cAQxi5PkE+egal5cTjC6uyK9xMRxjOPiLfm+Es2wIz6sAGsbx9iwsjuYoQft5jOgpR/h/iPAf6XGA4IF0fw7/rofmfR+iH8K1+TbQMmtfcypnYTLIcYrJbY6bXg88DcGjBnirCUauVK6l3Ev4CXCVQ3cR6/ZDAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"grafana postgre\"\n        title=\"grafana postgre\"\n        src=\"/static/20236ae5e80097abf9647cdf8a1ee009/799d3/grafana_postgre.png\"\n        srcset=\"/static/20236ae5e80097abf9647cdf8a1ee009/00d96/grafana_postgre.png 148w,\n/static/20236ae5e80097abf9647cdf8a1ee009/0b23c/grafana_postgre.png 295w,\n/static/20236ae5e80097abf9647cdf8a1ee009/799d3/grafana_postgre.png 590w,\n/static/20236ae5e80097abf9647cdf8a1ee009/2a3d6/grafana_postgre.png 885w,\n/static/20236ae5e80097abf9647cdf8a1ee009/ae92f/grafana_postgre.png 1180w,\n/static/20236ae5e80097abf9647cdf8a1ee009/eff2e/grafana_postgre.png 1920w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h2 id=\"dashboard-추가\"><a href=\"#dashboard-%EC%B6%94%EA%B0%80\" aria-label=\"dashboard 추가 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Dashboard 추가</h2>\n<p>왼쪽의 <code class=\"language-text\">+</code>버튼을 클릭한 후에 <code class=\"language-text\">create dashboard</code> 로 들어감\n<code class=\"language-text\">Add Query</code> 를 클릭</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.166666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABFUlEQVQoz62R206DQBCGubLaiEZYTrtAKYfSoGm8amp8YtPUciwaH+53F4qp1cheePGFmWHnm2FRPtoGh/YdRVnhZfuK7S7Hbl9iX1Qn1Gc5J6+QlzWq5g1l3aKoDtzRQNFuVWTZAzw/gGk5MEy7gxgmCDGh6wY0jXS5TvraEJv8nOv6cBwGxjw4lEERL6MwQciZz2MkScrjGFG04HmE2SxEEESg1OsGiaED/WDr+OwXUQwuFE1CJlivN1itHrF5ekaaZp1MDGPM/yH8DeVaVTuRaBSIeLm8P24Yf9Uo8+SEk8kl/3YXNr+HAcuisGz6vcZzaeHpz/iL4Zy0cGy61IYXZxuONYwKp9Or/xVqdzcgkvcjwydcrT6pI3Gd5gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"grafana create dashboard\"\n        title=\"grafana create dashboard\"\n        src=\"/static/efa29914ded0d472617f4436d384bb88/799d3/grafana_create_dashboard.png\"\n        srcset=\"/static/efa29914ded0d472617f4436d384bb88/00d96/grafana_create_dashboard.png 148w,\n/static/efa29914ded0d472617f4436d384bb88/0b23c/grafana_create_dashboard.png 295w,\n/static/efa29914ded0d472617f4436d384bb88/799d3/grafana_create_dashboard.png 590w,\n/static/efa29914ded0d472617f4436d384bb88/2a3d6/grafana_create_dashboard.png 885w,\n/static/efa29914ded0d472617f4436d384bb88/ae92f/grafana_create_dashboard.png 1180w,\n/static/efa29914ded0d472617f4436d384bb88/eff2e/grafana_create_dashboard.png 1920w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><code class=\"language-text\">Query</code>를 <code class=\"language-text\">PostgreSQL</code>로 변경하고 아래와 같이 sql을 작성</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.166666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABcElEQVQoz5WSSXOCQBCF56aIIgMMm4AsLpjkkIiaVH5yYuJaZvO/vfSgJsZDSg9f9euGedN0w7bbL7x/fGKxXOFpOsPzy3zPDNPXOWaL1b8s1xviDYvVBvPlGiyOMwRBG7btwXF8uE4Lrtv6jUTLj8p3pPa84A9RmCCKEkifdjsFG9xcY/I4wehhRIwxuh9hOClQTCiOix2Uy2cHfVzfMcRtcYduL5cdJujng5JOr48ko5uoJoniuIxxkiLNOj/5IR7IOl3kg6sysl7kocktNA0LNbWOWu0yFKUOTeM0MhdCOGA5dcaFhyBNwW0BVdWgnB464rS+M1VRqShlzrKsS0Y+bFqIadEtfgxBWgjS9vnIhTquD6ZzA9xyYPk+NK5Th42LP1uOSp5rNJpgdRKGG8JtRbDo1zGdENy0wWmu3LgEAcMUYNJZJwNDCFoOdUtFncx0bp4NJ6SZKQ2rNEwuZxaEtGmO2n7A1apSxnOoHulvfYs5CW782O8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"grafana sql\"\n        title=\"grafana sql\"\n        src=\"/static/e90b410c126b31892b19759f5d0868a7/799d3/grafana_sql.png\"\n        srcset=\"/static/e90b410c126b31892b19759f5d0868a7/00d96/grafana_sql.png 148w,\n/static/e90b410c126b31892b19759f5d0868a7/0b23c/grafana_sql.png 295w,\n/static/e90b410c126b31892b19759f5d0868a7/799d3/grafana_sql.png 590w,\n/static/e90b410c126b31892b19759f5d0868a7/2a3d6/grafana_sql.png 885w,\n/static/e90b410c126b31892b19759f5d0868a7/ae92f/grafana_sql.png 1180w,\n/static/e90b410c126b31892b19759f5d0868a7/eff2e/grafana_sql.png 1920w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h1 id=\"result\"><a href=\"#result\" aria-label=\"result permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Result</h1>\n<p>NexClipper에서 metric들을 수집하여 TimescaleDB로 저장하고, 저장한 데이터들을 Grafana를 통해 손쉽게 Kubernetes를 모니터링 할 수 있다는 것을 알아보았다.</p>\n<p>NexClipper와 TimescaleDB를 사용함으로써 다음과 같은 장점을 가진다</p>\n<ul>\n<li>대용량 데이터의 저장 및 처리</li>\n<li>Openmetrics를 이용하여 다른 플랫폼과의 연동</li>\n<li>무한한 확장성을 가지며 스토리지가 허용하는 만큼 최대한 메트릭 데이터 보관 가능</li>\n<li>복잡한 네트워크 보안 정책이 적용되어 있는 환경에서도 Agent는 수집한 Metric정보를 서버로 전송하여 저장하고 조회 가능</li>\n</ul>","frontmatter":{"title":"TimescaleDB와 NexClipper를 이용한 Kubernetes 모니터링하기","date":"December 30, 2019"}}},"pageContext":{"slug":"/development/nexclipper와-grafana-연결하기/","previous":{"fields":{"slug":"/development/기술-블로그-오픈/"},"frontmatter":{"title":"기술 블로그 오픈","category":"development","draft":false}},"next":{"fields":{"slug":"/development/쿠버네티스를-공부해-본-후기/"},"frontmatter":{"title":"쿠버네티스를 공부해 본 후기","category":"development","draft":false}}}}}